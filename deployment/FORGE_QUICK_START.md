# ‚ö° Laravel Forge + Vultr Quick Start

**Complete deployment in 20 minutes!** Copy-paste these steps.

**üìç Deployment Target:** `boxindustries.opus-chai.com` (subdomain)

---

## üìã Pre-Flight Checklist

- [ ] GitHub/GitLab/Bitbucket account with your code pushed
- [ ] Laravel Forge account (sign up: https://forge.laravel.com)
- [ ] Vultr account (sign up: https://www.vultr.com)
- [ ] Access to opus-chai.com DNS settings
- [ ] Credit card for Forge ($12/month) and Vultr ($5-10/month)

---

## üöÄ 20-Minute Deployment Steps

### Step 1: Prepare Code (2 minutes)

```bash
cd /Users/jflores/Herd/box-industries

# Build assets
npm run build

# Commit and push
git add .
git commit -m "Production ready"
git push origin main
```

---

### Step 2: Create Vultr Server (3 minutes)

1. Login to Vultr: https://my.vultr.com
2. Click **Deploy New Server**
3. Choose:
   - **Cloud Compute** (Shared CPU)
   - **Location:** Closest to users
   - **Ubuntu:** 24.04 LTS
   - **Size:** $10/month (2GB RAM) recommended
4. Click **Deploy Now**
5. **Copy the IP address** from server dashboard

---

### Step 3: Setup Forge Server (5 minutes)

1. Login to Forge: https://forge.laravel.com
2. Click **Create Server**
3. Select **Custom VPS**
4. Fill in:
   ```
   Name: Box Industries Production
   IP Address: [Your Vultr IP]
   PHP Version: 8.4
   Database: MySQL 8.0
   Database Name: box_industries
   ```
5. Enable:
   - ‚úÖ Node.js
   - ‚úÖ Redis
6. Click **Create Server**
7. ‚òï Wait 5-10 minutes for provisioning

---

### Step 4: Create Site (2 minutes)

1. In Forge, go to your server
2. Click **New Site**
3. Fill in:
   ```
   Root Domain: boxindustries.opus-chai.com
   Aliases: (leave empty - subdomain doesn't need www)
   Project Type: Web Application
   Web Directory: /public
   ```
4. Click **Add Site**

---

### Step 5: Connect Git Repository (2 minutes)

**First time only - Connect GitHub:**
1. Forge ‚Üí **Account** ‚Üí **Source Control**
2. Click **GitHub** ‚Üí Authorize

**Install Repository:**
1. Forge ‚Üí Your Server ‚Üí Your Site
2. Click **Git Repository**
3. Fill in:
   ```
   Provider: GitHub
   Repository: your-username/box-industries
   Branch: main
   ```
4. ‚úÖ Install Composer Dependencies
5. Click **Install Repository**

---

### Step 6: Configure Environment (3 minutes)

1. Forge ‚Üí Your Site ‚Üí **Environment**
2. **Copy all contents from your `.env.production` file** and paste into Forge's environment editor
3. Update these specific values in Forge:

```env
APP_URL=https://boxindustries.opus-chai.com

# Database credentials (Forge auto-generates these)
DB_HOST=localhost
DB_DATABASE=forge
DB_USERNAME=forge
DB_PASSWORD=[auto-generated by Forge]

# Mail settings - you'll configure these manually
```

4. Click **Save**

---

### Step 7: Generate App Key (1 minute)

1. Forge ‚Üí Your Site ‚Üí **Commands**
2. Run:
   ```bash
   php artisan key:generate
   ```

---

### Step 8: Setup Database (2 minutes)

**Option A: Run Migrations**
```bash
php artisan migrate --force
php artisan db:seed --force
```

**Option B: Import Existing Database**
```bash
# On local machine, export database
php deployment/scripts/export-database.php

# Upload to server
scp database_export_*.sql forge@your-server-ip:/home/forge/boxindustries.opus-chai.com/

# SSH into server
ssh forge@your-server-ip

# Import
mysql -u forge -p forge < /home/forge/boxindustries.opus-chai.com/database_export_*.sql
```

---

### Step 9: Configure Deployment Script (2 minutes)

1. Forge ‚Üí Your Site ‚Üí **Deployment** ‚Üí **Edit Deploy Script**
2. Replace with:

```bash
cd /home/forge/boxindustries.opus-chai.com
set -e

php artisan down || true
git pull origin main
composer install --no-dev --no-interaction --prefer-dist --optimize-autoloader
php artisan migrate --force
php artisan config:cache
php artisan route:cache
php artisan view:cache
php artisan optimize
php artisan queue:restart
php artisan up
```

3. Click **Save**

---

### Step 10: Setup Queue Worker (1 minute)

1. Forge ‚Üí Your Server ‚Üí **Daemons** ‚Üí **New Daemon**
2. Fill in:
   ```
   Command: php artisan queue:work --sleep=3 --tries=3 --max-time=3600
   Directory: /home/forge/boxindustries.opus-chai.com
   User: forge
   Processes: 1
   ```
3. Click **Create Daemon**

---

### Step 11: Point Domain (3 minutes)

**In your DNS provider for opus-chai.com:**

Add this subdomain record:
```
Type: A
Name: boxindustries
Value: [Your Vultr IP]
TTL: Automatic (or 3600)
```

**Example:** If your Vultr IP is `123.456.78.90`, this creates `boxindustries.opus-chai.com ‚Üí 123.456.78.90`

**Wait 5-10 minutes for DNS to propagate**

---

### Step 12: Install SSL Certificate (2 minutes)

1. Wait for DNS to propagate (check with: `ping boxindustries.opus-chai.com`)
2. Forge ‚Üí Your Site ‚Üí **SSL** ‚Üí **LetsEncrypt**
3. Domains: `boxindustries.opus-chai.com`
4. Click **Obtain Certificate**
5. Toggle **Force HTTPS** ON

---

### Step 13: Deploy! (1 minute)

1. Forge ‚Üí Your Site ‚Üí **Deployment**
2. Click **Deploy Now**
3. Watch the log for success message
4. Visit `https://boxindustries.opus-chai.com`

**üéâ You're live!**

---

## üîÑ Future Deployments

Enable **Quick Deploy** for automatic deployments:

1. Forge ‚Üí Your Site ‚Üí **Deployment**
2. Toggle **Quick Deploy** ON

Now just:
```bash
git push origin main
```

**Forge automatically deploys!** üöÄ

---

## ‚úÖ Post-Deployment Checklist

- [ ] Visit your site: `https://boxindustries.opus-chai.com`
- [ ] Check all pages load
- [ ] Test forms and functionality
- [ ] Verify SSL (green padlock)
- [ ] Check logs for errors (Forge ‚Üí Logs)
- [ ] Verify queue worker is running (Forge ‚Üí Daemons)
- [ ] Setup monitoring alerts (Forge ‚Üí Monitoring)
- [ ] Verify email configuration is working

---

## üìä Cost Summary

- **Vultr VPS:** $5-10/month
- **Laravel Forge:** $12/month (5-day free trial)
- **Domain:** ~$12/year ($1/month)
- **SSL:** FREE (Let's Encrypt)

**Total: $18-23/month** for professional hosting ‚ú®

---

## üêõ Common Issues

### Deployment fails
```bash
# Check deployment log in Forge
# Common fix:
php artisan config:clear
composer dump-autoload
```

### Database connection error
```bash
# Verify .env database credentials match
# Forge ‚Üí Server ‚Üí Database for credentials
```

### Queue jobs not processing
```bash
# Restart queue worker
# Forge ‚Üí Server ‚Üí Daemons ‚Üí Restart
```

### SSL certificate fails
```bash
# Ensure DNS is pointing to your server IP
# Wait 5-10 minutes after DNS changes
# Try again
```

---

## üÜò Get Help

- **Forge Docs:** https://forge.laravel.com/docs
- **Vultr Docs:** https://www.vultr.com/docs/
- **Support:** support@laravel.com

---

## üìö Full Documentation

For detailed explanations, see: `FORGE_VULTR_GUIDE.md`

---

**Happy deploying! üöÄ**

